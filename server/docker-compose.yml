services:
  mc:
    image: itzg/minecraft-server:stable
    restart: unless-stopped
    pull_policy: daily

    # Enable interactive console
    # https://docker-minecraft-server.readthedocs.io/en/latest/commands/#enabling-interactive-console
    tty: true
    stdin_open: true

    ports:
      - ${SERVER_PORT}:25565
      - ${RCON_PORT}:${RCON_PORT}

    environment:
      EULA: true
      TYPE: ARCLIGHT
      ARCLIGHT_TYPE: NEOFORGE

      VERSION: $VERSION
      NEOFORGE_VERSION: $NEOFORGE_VERSION
      MEMORY: $MEMORY
      ENABLE_RCON: $ENABLE_RCON
      RCON_PASSWORD: $RCON_PASSWORD
      RCON_PORT: $RCON_PORT

      REMOVE_OLD_MODS: $REMOVE_OLD_MODS
      SPIGET_RESOURCES: $SPIGET_PLUGINS
      USES_PLUGINS: true
      PLUGINS_FILE: /extras/$PLUGINS_FILE

    volumes:
      - ./extras:/extras
      # https://docker-minecraft-server.readthedocs.io/en/latest/data-directory/
      - $DATA_DIR:/data
